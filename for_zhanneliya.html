<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–î–ª—è —Ç–µ–±—è ‚Äî –ñ–∞–Ω–Ω–µ–ª–∏—è</title>
<style>
  :root{
    --bg:#07061a;
    --card:#0f1630cc;
    --accent:#ffd6ea;
    --soft:#f7f7fb;
    --glass: rgba(255,255,255,0.04);
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: Inter, "Segoe UI", Roboto, system-ui, -apple-system; 
    background: radial-gradient(ellipse at 20% 10%, rgba(255,240,255,0.03), transparent 20%), 
                linear-gradient(180deg,#050417 0%, #08102a 100%);
    color:var(--soft); -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow-y:auto;
    padding-bottom:60px;
  }

  /* Stars background */
  .sky{
    position:fixed; inset:0; pointer-events:none; z-index:0;
    background-image:
      radial-gradient(circle at 20% 10%, rgba(255,255,255,0.06) 0 1px, transparent 1px),
      radial-gradient(circle at 60% 30%, rgba(255,255,255,0.04) 0 1px, transparent 1px),
      radial-gradient(circle at 80% 70%, rgba(255,255,255,0.03) 0 1px, transparent 1px);
    background-size: 1200px 800px, 900px 600px, 700px 500px;
    animation: twinkle 8s linear infinite;
    filter: drop-shadow(0 0 8px rgba(255,255,255,0.02));
  }
  @keyframes twinkle{
    0%{opacity:0.9}
    50%{opacity:1}
    100%{opacity:0.9}
  }

  .container{position:relative; z-index:2; max-width:980px; margin:40px auto; padding:28px;}
  header{display:flex;align-items:center;flex-direction:column; gap:18px; margin-bottom:26px}
  h1{font-size:28px; margin:0; color:#fff; text-shadow:0 6px 24px rgba(0,0,0,0.6)}
  .subtitle{color:rgba(255,255,255,0.75); font-size:15px}

  /* Star centerpiece */
  .main-star-wrap{display:flex;align-items:center;justify-content:center; margin:18px 0 30px; position:relative}
  .star{
    width:180px; height:180px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #fff 0 6%, #ffe7f0 6% 22%, #ffd6ea 22% 60%, transparent 60%);
    display:flex;align-items:center;justify-content:center; box-shadow: 0 8px 40px rgba(255,182,210,0.12), inset 0 2px 8px rgba(255,255,255,0.12);
    transform:scale(1); transition:transform .45s cubic-bezier(.2,.9,.2,1), box-shadow .45s;
    cursor:pointer;
  }
  .star[data-active="true"]{ transform:scale(1.08); box-shadow:0 12px 80px rgba(255,182,210,0.25); animation: pulse 2s infinite; }
  @keyframes pulse{0%{transform:scale(1.06)}50%{transform:scale(1.1)}100%{transform:scale(1.06)}}

  .star-label{position:absolute; top:56%; transform:translateY(-10%); text-align:center; font-weight:600; color:#fff; text-shadow:0 6px 20px rgba(0,0,0,0.6)}

  /* Constellation heart using svg overlay */
  .constellation{position:absolute; inset:0; pointer-events:none; z-index:1; display:flex; align-items:center; justify-content:center;}

  /* Intro card */
  .intro-card{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:16px; padding:22px; box-shadow:0 8px 30px rgba(2,6,23,0.6); backdrop-filter: blur(6px);
    margin-bottom:22px;
    transition:transform .5s ease, opacity .45s ease;
  }
  .intro-card p{margin:8px 0 0; font-size:16px; color:rgba(255,255,255,0.9)}

  /* Sections grid */
  .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:18px; margin-top:10px}
  @media(max-width:780px){.grid{grid-template-columns:1fr} .star{width:140px;height:140px}}

  .card{
    background:var(--card); border-radius:14px; padding:18px; position:relative; overflow:hidden;
    transition: transform .35s ease, box-shadow .35s ease;
    box-shadow:0 6px 28px rgba(5,8,20,0.6);
  }
  .card:hover{ transform:translateY(-6px); box-shadow:0 14px 40px rgba(5,8,20,0.75) }

  .card h3{margin:0 0 10px;font-size:18px}
  .card p{margin:0;color:rgba(255,255,255,0.85)}

  /* Buttons */
  .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; background:linear-gradient(90deg,#ffecf6,#ffd6ea); color:#2b1020; font-weight:700; cursor:pointer; border:none; box-shadow:0 6px 20px rgba(255,174,204,0.08)}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,0.06); color:var(--soft); padding:8px 12px; border-radius:10px; cursor:pointer}

  /* Letter modal */
  .modal{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg, rgba(0,0,0,0.4), rgba(0,0,0,0.6)); backdrop-filter: blur(6px); z-index:20; padding:20px; opacity:0; pointer-events:none; transition:opacity .25s ease}
  .modal.open{opacity:1; pointer-events:auto}
  .letter{width:100%; max-width:680px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px; padding:22px; box-shadow:0 10px 40px rgba(2,6,23,0.7)}
  .letter h2{margin:0 0 10px}
  .letter p{white-space:pre-line; line-height:1.5; color:rgba(255,255,255,0.95)}

  .close{position:absolute; right:22px; top:22px; background:transparent; color:#fff; border:0; font-size:18px; cursor:pointer}

  /* Flower */
  .flower-wrap{display:flex;flex-direction:column;align-items:center;gap:12px}
  .flower-svg{width:140px;height:140px; transition:transform .35s ease}
  .petal{transition:transform .6s cubic-bezier(.2,.9,.2,1), opacity .6s; transform-origin:50% 100%}
  .flower-stage-1 .petal{transform:scale(0.7) translateY(20px); opacity:0.6}
  .flower-stage-2 .petal{transform:scale(0.92) translateY(8px); opacity:0.85}
  .flower-stage-3 .petal{transform:scale(1) translateY(0); opacity:1}

  /* Micro-messages */
  .micro{display:flex;flex-direction:column;gap:10px; align-items:flex-start}
  .micro .box{background:linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); padding:12px 14px; border-radius:10px; width:100%}

  /* Heart game */
  .big-heart{display:flex;flex-direction:column;align-items:center;gap:12px;padding:28px}
  .heart{
    width:120px;height:120px;border-radius:24px; display:flex;align-items:center;justify-content:center; cursor:pointer;
    background: radial-gradient(circle at 30% 25%, rgba(255,230,240,0.18), rgba(255,182,210,0.06));
    box-shadow:0 8px 30px rgba(255,160,200,0.06); transition:transform .22s ease, box-shadow .22s ease, filter .22s;
    filter:grayscale(.6) brightness(.8); transform:scale(1);
  }
  .heart[data-level="1"]{filter:grayscale(.4) brightness(.88)}
  .heart[data-level="3"]{filter:grayscale(.15) brightness(1)}
  .heart[data-active="true"]{transform:scale(1.08); box-shadow:0 20px 80px rgba(255,120,170,0.22); filter:none}
  .spark{position: absolute; width:12px;height:12px;border-radius:50%; background:radial-gradient(circle,#fff,#ffd6ea); opacity:0; transform:translateY(0); pointer-events:none}

  footer{position:fixed; left:0; right:0; bottom:0; display:flex; justify-content:center; padding:12px; z-index:10}
  .download{background:linear-gradient(90deg,#ffd6ea,#fff2f8); padding:10px 14px; border-radius:12px; color:#2b1020; font-weight:700; text-decoration:none}

  /* small helpers */
  .muted{color:rgba(255,255,255,0.7); font-size:13px}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
</style>
</head>
<body>
  <div class="sky" aria-hidden="true"></div>
  <div class="container">
    <header>
      <div class="intro-card">
        <div class="main-star-wrap">
          <div class="star" id="mainStar" role="button" tabindex="0" aria-pressed="false" title="–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –∑–∞–∂–µ—á—å –∑–≤—ë–∑–¥–æ—á–∫—É">
            <svg width="86" height="86" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M12 2l2.5 5.5L20 9l-4 3.5L17 20l-5-2.5L7 20l1-7.5L4 9l5.5-1.5L12 2z" fill="#fff"/>
            </svg>
          </div>
          <div class="star-label"><strong>–õ—é–±–∏–º–∞—è, —ç—Ç–æ –≤—Å—ë –¥–ª—è —Ç–µ–±—è üí´‚ù§Ô∏è</strong></div>
          <div class="constellation" aria-hidden="true">
            <!-- heart-shaped constellation SVG -->
            <svg width="360" height="220" viewBox="0 0 360 220" fill="none" style="opacity:.9">
              <defs>
                <radialGradient id="g1" cx="50%" cy="50%">
                  <stop offset="0%" stop-color="#fff"/>
                  <stop offset="60%" stop-color="#ffd6ea" stop-opacity="0.7"/>
                </radialGradient>
              </defs>
              <path d="M180 60 C 150 10, 40 20, 80 120 C 110 190, 170 200, 180 210 C 190 200, 250 190, 280 120 C 320 20, 210 10, 180 60 Z" stroke="rgba(255,200,235,0.06)" stroke-width="1.8" fill="none"></path>
              <!-- little stars laid along heart -->
              <g id="tinyStars" fill="url(#g1)">
                <circle cx="140" cy="50" r="3"/>
                <circle cx="160" cy="40" r="2.6"/>
                <circle cx="180" cy="32" r="3.2"/>
                <circle cx="200" cy="38" r="2.4"/>
                <circle cx="220" cy="48" r="2.8"/>
                <circle cx="240" cy="68" r="2.4"/>
                <circle cx="260" cy="92" r="3.2"/>
                <circle cx="280" cy="120" r="2.6"/>
                <circle cx="260" cy="150" r="2.8"/>
                <circle cx="230" cy="175" r="3.2"/>
                <circle cx="200" cy="195" r="2.6"/>
                <circle cx="170" cy="190" r="3"/>
                <circle cx="130" cy="160" r="2.6"/>
                <circle cx="110" cy="120" r="2.8"/>
                <circle cx="120" cy="80" r="3.2"/>
              </g>
            </svg>
          </div>
        </div>
        <p class="subtitle">–ü—Ä–æ–∫—Ä—É—Ç–∏ –≤–Ω–∏–∑ ‚Äî —Ç–∞–º —Ç—ã –Ω–∞–π–¥—ë—à—å –º–∞–ª–µ–Ω—å–∫–∏–µ –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ —è —Å–æ–±—Ä–∞–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–±—è</p>
      </div>
    </header>

    <main class="grid" aria-live="polite">
      <section class="card" id="lettersCard" aria-labelledby="lettersTitle">
        <h3 id="lettersTitle">‚úâ –ü–∏—Å—å–º–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–∫—Ä–æ—é—Ç—Å—è –ø–æ–∑–∂–µ</h3>
        <p class="muted">–ù–∞–∂–º–∏ –Ω–∞ –ª—é–±—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø–∏—Å—å–º–æ</p>
        <div style="margin-top:12px; display:flex;flex-direction:column; gap:10px">
          <button class="btn" data-letter="1">–ö–æ–≥–¥–∞ —Ç–µ–±–µ —Ç—è–∂–µ–ª–æ</button>
          <button class="btn" data-letter="2">–ö–æ–≥–¥–∞ —Ç—ã –∑–ª–∏—à—å—Å—è –Ω–∞ —Å–µ–±—è</button>
          <button class="btn" data-letter="3">–ö–æ–≥–¥–∞ —Ç—ã –Ω–µ –≤–∏–¥–∏—Ç —Å–º—ã—Å–ª–∞</button>
          <button class="btn" data-letter="4">–ö–æ–≥–¥–∞ —Ç–µ–±–µ –Ω—É–∂–Ω–∞ –ª—é–±–æ–≤—å</button>
        </div>
      </section>

      <section class="card" id="flowerCard" aria-labelledby="flowerTitle">
        <h3 id="flowerTitle">üå± –¶–≤–µ—Ç–æ–∫ —Ç–≤–æ–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è</h3>
        <p class="muted">–í—ã–±–∏—Ä–∞–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî —Ü–≤–µ—Ç–æ–∫ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ-–Ω–æ–≤–æ–º—É</p>
        <div class="flower-wrap">
          <svg class="flower-svg flower-stage-1" id="flowerSvg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <g transform="translate(100,100)">
              <g class="petal" id="petal1"><ellipse rx="18" ry="38" transform="rotate(0) translate(0,-48)" fill="#ffd6ea" /></g>
              <g class="petal" id="petal2"><ellipse rx="18" ry="38" transform="rotate(50) translate(0,-48)" fill="#ffe7f2" /></g>
              <g class="petal" id="petal3"><ellipse rx="18" ry="38" transform="rotate(100) translate(0,-48)" fill="#ffd6ea" /></g>
              <g class="petal" id="petal4"><ellipse rx="18" ry="38" transform="rotate(150) translate(0,-48)" fill="#fff8fb" /></g>
              <g class="petal" id="petal5"><ellipse rx="18" ry="38" transform="rotate(200) translate(0,-48)" fill="#ffe7f2" /></g>
              <g class="petal" id="petal6"><ellipse rx="18" ry="38" transform="rotate(250) translate(0,-48)" fill="#ffd6ea" /></g>
              <circle r="14" fill="#fff1f6" stroke="#ffd6ea" stroke-width="2"/>
            </g>
          </svg>

          <div class="row">
            <button class="ghost" data-stage="1">–ú–Ω–µ —Ç—è–∂–µ–ª–æ</button>
            <button class="ghost" data-stage="2">–°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —á—É—Ç—å –ª—É—á—à–µ</button>
            <button class="ghost" data-stage="3">–ü–æ—è–≤–∏–ª–∞—Å—å –∏—Å–∫—Ä–∞</button>
          </div>
          <div class="muted" id="flowerText" style="margin-top:6px; text-align:center; max-width:320px">
            –î–∞–∂–µ —Å–∞–º—ã–º –∫—Ä–∞—Å–∏–≤—ã–º —Ü–≤–µ—Ç–æ—á–∫–∞–º –±—ã–≤–∞–µ—Ç —Ç—è–∂–µ–ª–æ, –ø–æ—ç—Ç–æ–º—É —Ç—ã –º–æ–∂–µ—à—å —Å–µ–π—á–∞—Å –ø–æ–±—ã—Ç—å —Å–æ –º–Ω–æ–π. –í–∏–¥–∏–º–æ –º–æ–µ–º—É —Ü–≤–µ—Ç–æ—á–∫—É –Ω—É–∂–Ω–æ –Ω–∞–±—Ä–∞—Ç—å—Å—è —Å–∏–ª –∏ –ø–æ—ç—Ç–æ–º—É —è –∑–¥–µ—Å—å. –ú—ã –º–æ–∂–µ–º —Ç—è–Ω—É—Ç—å—Å—è –∫ —Å–≤–µ—Ç—É –≤–º–µ—Å—Ç–µ, –Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–±—É–¥—å —Å–æ –º–Ω–æ–π —Å–æ–±–æ–π –∏ –æ—Ç–¥–æ—Ö–Ω–∏, –º–∏–ª–∞—è –º–æ—è ‚ù§Ô∏è
          </div>
        </div>
      </section>

      <section class="card" id="starCard" aria-labelledby="starTitle">
        <h3 id="starTitle">‚≠ê –¢–≤–æ—è –∑–≤—ë–∑–¥–æ—á–∫–∞ ‚Äî –ñ–∞–Ω–Ω–µ–ª—ë–∫</h3>
        <p class="muted">–ù–∞–∂–º–∏ –Ω–∞ –∑–≤—ë–∑–¥–æ—á–∫—É –≤–≤–µ—Ä—Ö—É —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –º–∞–ª–µ–Ω—å–∫–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ</p>
        <div style="margin-top:12px; display:flex;gap:10px;flex-wrap:wrap">
          <div class="card" style="flex:1; min-width:200px;">
            <h3 style="font-size:16px">–ó–≤—ë–∑–¥–æ—á–∫–∏-—Å–µ—Ä–¥–µ—á–∫–∏</h3>
            <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
              <button class="ghost star-msg">–¢—ã –¥–µ–ª–∞–µ—à—å –º–æ–π –º–∏—Ä —É—é—Ç–Ω–µ–µ ‚ù§Ô∏è</button>
              <button class="ghost star-msg">–¢—ã ‚Äî –º–æ—è –Ω–µ–∂–Ω–æ—Å—Ç—å ‚ù§Ô∏è</button>
              <button class="ghost star-msg">–° —Ç–æ–±–æ–π —Ç–µ–ø–ª–µ–µ ‚ù§Ô∏è</button>
              <button class="ghost star-msg">–¢—ã ‚Äî –º–æ–π —Å–≤–µ—Ç –¥–∞–∂–µ –≤ —Ç–µ–º–Ω–æ—Ç–µ ‚ù§Ô∏è</button>
              <button class="ghost star-msg">–¢—ã —Å–∞–º–∞—è —Ä–æ–¥–Ω–∞—è –¥–ª—è –º–µ–Ω—è ‚ù§Ô∏è</button>
              <button class="ghost star-msg">–¢—ã –¥–µ–ª–∞–µ—à—å –º–µ–Ω—è –ª—É—á—à–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚ù§Ô∏è</button>
              <button class="ghost star-msg">–¢—ã ‚Äî –º–æ—ë —Å—á–∞—Å—Ç—å–µ, –ñ–∞–Ω–Ω–µ–ª—ë–∫ ‚ù§Ô∏è</button>
            </div>
          </div>
        </div>
      </section>

      <section class="card" id="microCard" aria-labelledby="microTitle">
        <h3 id="microTitle">üéÅ –ú–∞–ª–µ–Ω—å–∫–∏–µ —Ç—ë–ø–ª—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</h3>
        <p class="muted">–ù–∞–∂–∏–º–∞–π, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –∏—Ö 31</p>
        <div class="micro" style="margin-top:10px">
          <div class="box" id="microBox">–¢—ã —Å–∞–º–∞—è –¥–æ–±—Ä–∞—è –¥–µ–≤–æ—á–∫–∞ ‚ù§Ô∏è</div>
          <div class="row" style="margin-top:8px">
            <button class="btn" id="nextMicro">–ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
            <button class="ghost" id="shuffleMicro">–ü–æ–º–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫</button>
          </div>
        </div>
      </section>

      <section class="card big-heart" id="heartCard" aria-labelledby="heartTitle">
        <h3 id="heartTitle">üíñ –ú–∞–ª–µ–Ω—å–∫–∞—è –∏–≥—Ä–∞ —Å–≤–µ—Ç–∞</h3>
        <p class="muted">–ù–∞–∂–º–∏ –Ω–∞ —Å–µ—Ä–¥—Ü–µ ‚Äî –æ–Ω–æ —Å—Ç–∞–Ω–µ—Ç —è—Ä—á–µ</p>
        <div style="position:relative; width:100%; display:flex; justify-content:center; align-items:center">
          <div class="heart" id="heart" data-level="0" title="–ù–∞–∂–º–∏ –º–µ–Ω—è">
            <svg width="64" height="64" viewBox="0 0 24 24" aria-hidden="true"><path fill="#fff" d="M12 21s-7-4.4-9.3-7.1C-0.1 10.3 2.6 6 6.5 6c1.8 0 3.2.9 4.1 2.1C11.8 6.9 13.2 6 15 6c3.9 0 6.6 4.3 3.8 7.9C19 16.6 12 21 12 21z"/></svg>
          </div>
        </div>
        <div class="muted" id="heartInfo">–°–µ—Ä–¥—Ü–µ —Ç—É—Å–∫–ª–æ–µ ‚Äî –Ω–∞–∂–º–∏ 10 —Ä–∞–∑, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å—é—Ä–ø—Ä–∏–∑</div>
      </section>
    </main>
  </div>

  <!-- letter modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="letter" role="document">
      <button class="close" id="closeModal">‚úï</button>
      <h2 id="modalTitle">–ü–∏—Å—å–º–æ</h2>
      <p id="modalText"></p>
    </div>
  </div>

  <footer>
    <a class="download" id="downloadBtn" href="#" download="for_zhanneliya.html">–°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª —Å–∞–π—Ç–∞</a>
  </footer>

<script>
// Data from the user (texts)
const letters = {
  1: `–°–æ–ª–Ω—ã—à–∫–æ, —Ç–µ–±–µ –Ω–µ –Ω—É–∂–Ω–æ –±—ã—Ç—å —Å–∏–ª—å–Ω–æ–π —Å–æ –º–Ω–æ–π. –ü—Ä–æ—Å—Ç–æ –ø–æ–¥–æ–π–¥–∏, –¥–∞–∂–µ –º—ã—Å–ª–µ–Ω–Ω–æ ‚Äî —è —Ä—è–¥–æ–º. –î–∞–∂–µ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ —è –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—Å–µ–≥–¥–∞ –±–ª–∏–∂–µ –≤—Å–µ—Ö –∫ —Ç–µ–±–µ –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Å—Ç–∞–≤–ª—é –æ–¥–Ω—É –≤ –±–µ–¥–µ ü•∫\n\n–¢—ã –º–æ–∂–µ—à—å –ø–ª–∞–∫–∞—Ç—å, –º–æ–∂–µ—à—å —É—Å—Ç–∞–≤–∞—Ç—å, –º–æ–∂–µ—à—å –º–æ–ª—á–∞—Ç—å –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç—å ‚Äî —è –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥—É –∑–¥–µ—Å—å. –Ø –±—É–¥—É –æ–±–Ω–∏–º–∞—Ç—å —Ç–µ–±—è —Ç–∞–∫ –∫—Ä–µ–ø–∫–æ, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –º–æ–≥—É ‚ù§Ô∏è\n\n–ò–Ω–æ–≥–¥–∞ –≤—Å—ë –≤–æ–∫—Ä—É–≥ –∫–∞–∂–µ—Ç—Å—è —Ç—è–∂—ë–ª—ã–º‚Ä¶ –Ω–æ —Ç—ã –Ω–µ –æ–¥–Ω–∞ –≤ —ç—Ç–æ–º. –ú—ã –≤–º–µ—Å—Ç–µ. –í—Å–µ–≥–¥–∞ ‚ù§Ô∏è`,
  2: `–¢–µ–±–µ –Ω–µ –Ω—É–∂–Ω–æ –±—ã—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ–π (—Ö–æ—Ç—è –¥–ª—è –º–µ–Ω—è —Ç—ã –∏–¥–µ–∞–ª—å–Ω–∞). –ú—ã –≤—Å–µ –ª—é–¥–∏, –Ω–µ —Ä–æ–±–æ—Ç—ã, –∏ –º–æ–∂–µ–º –æ—à–∏–±–∞—Ç—å—Å—è. –í —ç—Ç–æ–º –Ω–µ—Ç –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ, –º–∞–ª—ã—à ü•∫\n\n–Ø –Ω–µ –≤–∏–∂—É –≤ —Ç–µ–±–µ –æ—à–∏–±–æ–∫ ‚Äî —è –≤–∏–∂—É –ø—Ä–µ–∫—Ä–∞—Å–Ω—É—é –¥–µ–≤—É—à–∫—É, –∫–æ—Ç–æ—Ä–∞—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª—É—á—à–µ –∏ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è ‚ù§Ô∏è\n\n–†–∞–∑—Ä–µ—à–∏ —Å–µ–±–µ –±—ã—Ç—å —Å–æ–±–æ–π. –Ø –ª—é–±–ª—é —Ç–µ–±—è –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π, –∫–∞–∫–∞—è —Ç—ã –µ—Å—Ç—å.\n\n–¢—ã –Ω–∞—Å—Ç–æ—è—â–∞—è ‚Äî –∞ –Ω–∞—Å—Ç–æ—è—â–∞—è —Ç—ã —Å–∞–º–∞—è –¥–æ–±—Ä–∞—è, –ø—Ä–µ–ª–µ—Å—Ç–Ω–∞—è, –∫—Ä–∞—Å–∏–≤–∞—è, —Ç—Ä—É–¥–æ–ª—é–±–∏–≤–∞—è –∏ –æ—á–µ–Ω—å –∑–∞–±–æ—Ç–ª–∏–≤–∞—è –¥–µ–≤–æ—á–∫–∞ ü•∫‚ù§Ô∏è`,
  3: `–°–µ–π—á–∞—Å –º–∏—Ä –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫, –±—É–¥—Ç–æ –≤ –Ω—ë–º –Ω–µ—Ç –º–µ—Å—Ç–∞ —Ä–∞–¥–æ—Å—Ç–∏. –ë—É–¥—Ç–æ –≤—Å—ë –ø–æ–±–ª–µ–∫–ª–æ, –∏ –∫—Ä–∞—Å–∫–∏ –∏—Å—á–µ–∑–∞—é—Ç –ø—Ä—è–º–æ –Ω–∞ –≥–ª–∞–∑–∞—Ö‚Ä¶ –ù–æ —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ, —Ö–æ—Ä–æ—à–æ?\n\n–ö—Ä–∞—Å–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω—É—Ç—Å—è. –ò –µ—Å–ª–∏ —Ç—ã –ø–æ–∫–∞ –Ω–µ –º–æ–∂–µ—à—å –≤ —ç—Ç–æ –≤–µ—Ä–∏—Ç—å ‚Äî —è –ø–æ–≤–µ—Ä—é –∑–∞ –Ω–∞—Å –¥–≤–æ–∏—Ö.\n\n–ü—Ä–æ—Å—Ç–æ –∑–Ω–∞–π: —Ç–≤–æ—ë —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –º–∏—Ä —Ç–µ–ø–ª–µ–µ –∏ —Å–≤–µ—Ç–ª–µ–µ ‚ù§Ô∏è\n\n–ù–µ –Ω—É–∂–Ω–æ —É–ª—ã–±–∞—Ç—å—Å—è –∏–ª–∏ –¥–µ–ª–∞—Ç—å –≤–∏–¥, —á—Ç–æ —Ç–µ–±–µ –ª—É—á—à–µ. –ü—Ä–æ—Å—Ç–æ –±—É–¥—å –∑–¥–µ—Å—å, –±—É–¥—å —Å–æ–±–æ–π. –Ø —Ä—è–¥–æ–º ‚Äî –≤—Å–µ–≥–¥–∞ ‚Äî –∏ –¥–∞–º —Ç–µ–±–µ —Ç–æ—Ç –ø–æ–∫–æ–π, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–±–µ –Ω—É–∂–µ–Ω. –≠—Ç–æ –º–æ—è —Ü–µ–ª—å.\n\n–¢—ã –¥–ª—è –º–µ–Ω—è –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ ‚ù§Ô∏è`,
  4: `–°–æ–ª–Ω—ã—à–∫–æ –º–æ—ë, –ø–æ–π–¥—ë–º, —è —Ç–µ–±—è –∫—Ä–µ–µ–µ–µ–ø–∫–æ –∑–∞–æ–±–Ω–∏–º–∞—é ü•π\n\n–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —è —Ä—è–¥–æ–º: —Ç—ã –ª–µ–∂–∏—à—å –Ω–∞ –º–æ–µ–π –≥—Ä—É–¥–∏, –∞ —è –Ω–µ–∂–Ω–æ –≥–ª–∞–∂—É —Ç–µ–±—è –ø–æ –≥–æ–ª–æ–≤–µ ü•∫\n\n–¢—ã –º–æ—è –º–∞–ª–µ–Ω—å–∫–∞—è, —Ö—Ä—É–ø–∫–∞—è –∫–æ—à–µ—á–∫–∞. –ü–æ–∑–≤–æ–ª—å –º–Ω–µ –ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ —Ç–µ–±–µ –∏ –∑–∞—Ç–∏—Å–∫–∞—Ç—å —Ç–µ–±—è —Ç–∞–∫ —Å–∏–ª—å–Ω–æ, –∫–∞–∫ —Ç—ã –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å ü•∞\n\n–ù–µ –∑–∞–±—ã–≤–∞–π: –º—ã –µ—Å—Ç—å –¥—Ä—É–≥ —É –¥—Ä—É–≥–∞. –Ø –æ—Ç–ø—Ä–∞–≤–ª—è—é —Ç–µ–±–µ —Å–æ—Ç–Ω—é —Ç—ã—Å—è—á –ø–æ—Ü–µ–ª—É–µ–≤ –∏–∑–¥–∞–ª–µ–∫–∞‚Ä¶ –ò –æ—á–µ–Ω—å —Å–∫–æ—Ä–æ —è —É–∂–µ –±—É–¥—É —Ä—è–¥–æ–º, —á—Ç–æ–±—ã –∑–∞—Ü–µ–ª–æ–≤–∞—Ç—å —Ç–µ–±—è —Å –Ω–æ–≥ –¥–æ –≥–æ–ª–æ–≤—ã ü•π‚ù§Ô∏è`
};

const flowerTexts = {
  1: `–î–∞–∂–µ —Å–∞–º—ã–º –∫—Ä–∞—Å–∏–≤—ã–º —Ü–≤–µ—Ç–æ—á–∫–∞–º –±—ã–≤–∞–µ—Ç —Ç—è–∂–µ–ª–æ, –ø–æ—ç—Ç–æ–º—É —Ç—ã –º–æ–∂–µ—à—å —Å–µ–π—á–∞—Å –ø–æ–±—ã—Ç—å —Å–æ –º–Ω–æ–π. –í–∏–¥–∏–º–æ –º–æ–µ–º—É —Ü–≤–µ—Ç–æ—á–∫—É –Ω—É–∂–Ω–æ –Ω–∞–±—Ä–∞—Ç—å—Å—è —Å–∏–ª –∏ –ø–æ—ç—Ç–æ–º—É —è –∑–¥–µ—Å—å. –ú—ã –º–æ–∂–µ–º —Ç—è–Ω—É—Ç—å—Å—è –∫ —Å–≤–µ—Ç—É –≤–º–µ—Å—Ç–µ, –Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–±—É–¥—å —Å–æ –º–Ω–æ–π —Å–æ–±–æ–π –∏ –æ—Ç–¥–æ—Ö–Ω–∏, –º–∏–ª–∞—è –º–æ—è ‚ù§Ô∏è`,
  2: `–ú–∞–ª—ã—à, —Ç—ã —Ç–∞–∫–∞—è —É–º–Ω–∏—á–∫–∞ —É –º–µ–Ω—è ü•π‚ù§Ô∏è\n–ú–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏ –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã –∏ —è —Ç–∞–∫ –≥–æ—Ä–∂—É—Å—å —Ç–µ–º, —á—Ç–æ —Ç—ã –¥–≤–∏–≥–∞–µ—Ç—Å—è –≤–ø–µ—Ä—ë–¥, —Å–Ω–æ–≤–∞ –¥—ã—à–∏—Ç –Ω–∞–º–Ω–æ–≥–æ –ª–µ–≥—á–µ –∏ —É —Ç–µ–±—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–≤–æ—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –∏—Å–∫—Ä–∞ ü•π\n–¢—ã ‚Äî –º–æ—è –≥–æ—Ä–¥–æ—Å—Ç—å ‚ù§Ô∏è`,
  3: `–í–æ—Ç –æ–Ω–æ ‚Äî —Ç–æ, –∫ —á–µ–º—É –º—ã —Å—Ç—Ä–µ–º–∏–ª–∏—Å—å ü•∫\n–ò—Å–∫—Ä–∞ —Å–Ω–æ–≤–∞ –∑–¥–µ—Å—å, —Ç—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ —ç—Ç–æ ü•π\n–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —ç—Ç–æ–≥–æ, —è –±—É–¥—É –ø–æ–º–æ–≥–∞—Ç—å —Ç–µ–±–µ, –±—É–¥—É—á–∏ —Ä—è–¥–æ–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —ç—Ç—É –∏—Å–∫—Ä—É –∏ –¥–∞—Ç—å –µ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–∑–≥–æ—Ä–∞—Ç—å—Å—è –º—è–≥–∫–æ –∏ —Å–ø–æ–∫–æ–π–Ω–æ üíã‚ù§Ô∏è`
};

const starMainText = `–¢—ã ‚Äî –º–æ—è —Å–∞–º–∞—è –ª—é–±–∏–º–∞—è –∑–≤—ë–∑–¥–æ—á–∫–∞ ü•π‚ù§Ô∏è`;
const starMessages = [
  "–¢—ã –¥–µ–ª–∞–µ—à—å –º–æ–π –º–∏—Ä —É—é—Ç–Ω–µ–µ ‚ù§Ô∏è",
  "–¢—ã ‚Äî –º–æ—è –Ω–µ–∂–Ω–æ—Å—Ç—å ‚ù§Ô∏è",
  "–° —Ç–æ–±–æ–π —Ç–µ–ø–ª–µ–µ ‚ù§Ô∏è",
  "–¢—ã ‚Äî –º–æ–π —Å–≤–µ—Ç –¥–∞–∂–µ –≤ —Ç–µ–º–Ω–æ—Ç–µ ‚ù§Ô∏è",
  "–¢—ã —Å–∞–º–∞—è —Ä–æ–¥–Ω–∞—è –¥–ª—è –º–µ–Ω—è ‚ù§Ô∏è",
  "–¢—ã –¥–µ–ª–∞–µ—à—å –º–µ–Ω—è –ª—É—á—à–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚ù§Ô∏è",
  "–¢—ã ‚Äî –º–æ—ë —Å—á–∞—Å—Ç—å–µ, –ñ–∞–Ω–Ω–µ–ª—ë–∫ ‚ù§Ô∏è"
];

let microMessages = [
"–¢—ã —Å–∞–º–∞—è –¥–æ–±—Ä–∞—è –¥–µ–≤–æ—á–∫–∞ ‚ù§Ô∏è","–£ —Ç–µ–±—è —Å–∞–º–æ–µ –∫—Ä–∞—Å–∏–≤–æ–µ —Å–µ—Ä–¥—Ü–µ ‚ù§Ô∏è","–¢—ã —É–º–µ–µ—à—å –ª—é–±–∏—Ç—å –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É ‚ù§Ô∏è","–¢—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –∑–∞–±–æ—Ç–ª–∏–≤–∞—è ‚ù§Ô∏è","–° —Ç–æ–±–æ–π —Ç–∞–∫ —Ç–µ–ø–ª–æ –∏ —Å–ø–æ–∫–æ–π–Ω–æ ‚ù§Ô∏è","–¢—ã –¥–µ–ª–∞–µ—à—å –º–∏—Ä —è—Ä—á–µ –ø—Ä–æ—Å—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—è ‚ù§Ô∏è","–¢—ã –æ—á–µ–Ω—å —Ö—Ä—É–ø–∫–∞—è –∏ –Ω–µ–∂–Ω–∞—è, –∏ —ç—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ ‚ù§Ô∏è","–¢—ã —Å–∞–º–∞—è —Ç—Ä—É–¥–æ–ª—é–±–∏–≤–∞—è –º–∞–ª—ã—à–∫–∞ ‚ù§Ô∏è","–¢—ã —É–º–µ–µ—à—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ª—É—á—à–µ –≤—Å–µ—Ö ‚ù§Ô∏è","–¢—ã —Å–∞–º–∞—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –¥–µ–≤–æ—á–∫–∞ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏ ‚ù§Ô∏è","–¢—ã —É–º–µ–µ—à—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –≥–ª—É–±–∂–µ, —á–µ–º –¥—Ä—É–≥–∏–µ ‚ù§Ô∏è","–¢–≤–æ—è —É–ª—ã–±–∫–∞ ‚Äî –º–æ–π –ª—é–±–∏–º—ã–π —Å–≤–µ—Ç ‚ù§Ô∏è","–í —Ç–µ–±–µ —Å—Ç–æ–ª—å–∫–æ –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç–∏ ‚ù§Ô∏è","–¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –º–µ–Ω—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚ù§Ô∏è","–¢—ã –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–∞—è, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ç–∞–∫ –Ω–µ –∫–∞–∂–µ—Ç—Å—è ‚ù§Ô∏è","–¢—ã —É–º–µ–µ—à—å –ª—é–±–∏—Ç—å –≤—Å–µ–π –¥—É—à–æ–π ‚ù§Ô∏è","–¢–≤–æ—è –Ω–µ–∂–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –≤–æ–ª—à–µ–±—Å—Ç–≤–æ ‚ù§Ô∏è","–¢—ã —Ç–∞–∫–∞—è —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –∏ –Ω–∞—Å—Ç–æ—è—â–∞—è ‚ù§Ô∏è","–¢—ã –Ω–∞–ø–æ–ª–Ω—è–µ—à—å –º–µ–Ω—è —Ç–µ–ø–ª–æ–º ‚ù§Ô∏è","–¢—ã ‚Äî –º–æ—ë —Å–∞–º–æ–µ –º—è–≥–∫–æ–µ —á—É–≤—Å—Ç–≤–æ ‚ù§Ô∏è","–¢—ã –æ—á–µ–Ω—å —Å–º–µ–ª–∞—è, —Ö–æ—Ç—å –∏–Ω–æ–≥–¥–∞ –∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è ‚ù§Ô∏è","–¢–≤–æ–∏ –æ–±—ä—è—Ç–∏—è ‚Äî –º–æ–π –¥–æ–º ‚ù§Ô∏è","–¢—ã —Ç–∞–∫–∞—è –º–∞–ª–µ–Ω—å–∫–∞—è –∏ —Ç–∞–∫–∞—è –≤–∞–∂–Ω–∞—è –¥–ª—è –º–µ–Ω—è ‚ù§Ô∏è","–° —Ç–æ–±–æ–π —è —Å—Ç–∞–Ω–æ–≤–ª—é—Å—å –ª—É—á—à–µ ‚ù§Ô∏è","–¢—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –∏—Å–∫—Ä–µ–Ω–Ω—è—è ‚ù§Ô∏è","–¢—ã –ø—Ä–∏–Ω–æ—Å–∏—à—å —Å–≤–µ—Ç –¥–∞–∂–µ –≤ —Å–µ—Ä—ã–µ –¥–Ω–∏ ‚ù§Ô∏è","–¢—ã —É–º–µ–µ—à—å –¥–µ–ª–∞—Ç—å —Å–µ—Ä–¥—Ü–µ —Å–ø–æ–∫–æ–π–Ω—ã–º ‚ù§Ô∏è","–¢—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–µ–µ, —á–µ–º —Å–∞–º–∞ –¥—É–º–∞–µ—à—å ‚ù§Ô∏è","–¢—ã –æ—Å–æ–±–µ–Ω–Ω–∞—è, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è ‚ù§Ô∏è","–¢—ã ‚Äî —á—É–¥–æ, –∫–æ—Ç–æ—Ä–æ–µ —è –±–µ—Ä–µ–∂–Ω–æ –ª—é–±–ª—é ‚ù§Ô∏è","–¢—ã –º–æ—è —Å–∞–º–∞—è –ª—é–±–∏–º–∞—è –¥–µ–≤–æ—á–∫–∞ ‚ù§Ô∏è"
];

// modal controls
const modal = document.getElementById('modal');
const modalText = document.getElementById('modalText');
const modalTitle = document.getElementById('modalTitle');
const closeModal = document.getElementById('closeModal');
document.querySelectorAll('[data-letter]').forEach(b => {
  b.addEventListener('click', ()=> openLetter(b.dataset.letter));
});
closeModal.addEventListener('click', closeLetter);
modal.addEventListener('click', (e)=>{ if(e.target===modal) closeLetter(); });

function openLetter(id){
  modalTitle.textContent = document.querySelector(`[data-letter="${id}"]`).textContent;
  modalText.textContent = letters[id];
  modal.classList.add('open');
  modal.setAttribute('aria-hidden','false');
}
function closeLetter(){
  modal.classList.remove('open');
  modal.setAttribute('aria-hidden','true');
}

// main star interaction
const mainStar = document.getElementById('mainStar');
mainStar.addEventListener('click', ()=> toggleStar());
mainStar.addEventListener('keydown', (e)=> { if(e.key==='Enter' || e.key===' ') toggleStar(); });

function toggleStar(){
  const active = mainStar.getAttribute('data-active') === 'true';
  mainStar.setAttribute('data-active', String(!active));
  if(!active){
    showTempMessage(starMainText, 3500);
  }
}

// star small messages
document.querySelectorAll('.star-msg').forEach(btn=>{
  btn.addEventListener('click', ()=> showTempMessage(btn.textContent, 3000));
});

function showTempMessage(text, ms=2500){
  const prev = document.getElementById('tempMsg');
  if(prev){ prev.remove(); }
  const el = document.createElement('div');
  el.id='tempMsg';
  el.style.position='fixed';
  el.style.left='50%';
  el.style.bottom='120px';
  el.style.transform='translateX(-50%)';
  el.style.padding='12px 18px';
  el.style.borderRadius='12px';
  el.style.background='linear-gradient(90deg, rgba(255,255,255,0.05), rgba(255,255,255,0.03))';
  el.style.boxShadow='0 8px 40px rgba(0,0,0,0.6)';
  el.style.color='#fff';
  el.style.zIndex=30;
  el.style.fontWeight=600;
  el.textContent = text;
  document.body.appendChild(el);
  setTimeout(()=> el.remove(), ms);
}

// flower stages
const flowerSvg = document.getElementById('flowerSvg');
const flowerText = document.getElementById('flowerText');
document.querySelectorAll('[data-stage]').forEach(btn=>{
  btn.addEventListener('click', ()=> {
    const s = btn.dataset.stage;
    flowerSvg.classList.remove('flower-stage-1','flower-stage-2','flower-stage-3');
    flowerSvg.classList.add('flower-stage-'+s);
    flowerText.textContent = flowerTexts[s];
  });
});

// micro messages
const microBox = document.getElementById('microBox');
const nextMicro = document.getElementById('nextMicro');
const shuffleMicro = document.getElementById('shuffleMicro');

function pickMicro(){
  if(microMessages.length===0){ microBox.textContent = "–Ø –≤—Å–µ–≥–¥–∞ —Å —Ç–æ–±–æ–π ‚ù§Ô∏è"; return; }
  const i = Math.floor(Math.random()*microMessages.length);
  const text = microMessages.splice(i,1)[0];
  microBox.textContent = text;
}
nextMicro.addEventListener('click', pickMicro);
shuffleMicro.addEventListener('click', ()=>{
  microMessages = microMessages.sort(()=>Math.random()-0.5);
  showTempMessage('–ü–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–º–µ—à–∞–Ω', 1500);
});

// heart game
const heart = document.getElementById('heart');
const heartInfo = document.getElementById('heartInfo');
let heartCount = 0;
heart.addEventListener('click', ()=>{
  heartCount++;
  const level = Math.min(3, Math.ceil(heartCount/4)); // 0..3
  heart.setAttribute('data-level', String(level));
  if(heartCount>=10){
    heart.setAttribute('data-active','true');
    heartInfo.textContent = '–í–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –º–æ—ë —Å–µ—Ä–¥—Ü–µ –ø–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–µ–±—è –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏ ‚ò∫Ô∏èüíã';
    showTempMessage('–í–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –º–æ—ë —Å–µ—Ä–¥—Ü–µ –ø–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–µ–±—è –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏ ‚ò∫Ô∏èüíã', 4000);
  } else {
    heartInfo.textContent = `–°–µ—Ä–¥—Ü–µ —Ç—É—Å–∫–ª–æ–µ ‚Äî –Ω–∞–∂–º–∏ ${10-heartCount} —Ä–∞–∑, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å—é—Ä–ø—Ä–∏–∑`;
  }
  // small spark
  const s = document.createElement('div');
  s.className='spark';
  s.style.left=(50+Math.random()*80-40)+'%'; s.style.top=(40+Math.random()*40-20)+'%';
  document.getElementById('heartCard').appendChild(s);
  setTimeout(()=> { s.style.opacity=1; s.style.transform='translateY(-12px) scale(1.2)'; },20);
  setTimeout(()=> s.remove(),700);
});

// download generation: create downloadable html from the current DOM content
const downloadBtn = document.getElementById('downloadBtn');
downloadBtn.addEventListener('click', (e)=> {
  e.preventDefault();
  const doc = `<!doctype html>\n${document.documentElement.outerHTML}`;
  const blob = new Blob([doc], {type:'text/html;charset=utf-8'});
  const url = URL.createObjectURL(blob);
  downloadBtn.href = url;
  // allow browser to trigger download
  setTimeout(()=> { downloadBtn.removeAttribute('href'); URL.revokeObjectURL(url); }, 60000);
  downloadBtn.click();
});

// accessibility: close with Esc
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeLetter(); });

</script>
</body>
</html>
